# Manual QA Checklist - Production Handshake Flow

## מטרה
ווידוא שכל שרשרת ה-End-to-End (E2E) עובדת בסביבת ה-Production:
- יצירת פרויקט ← שליחת מיילים למנהל וללקוח
- הגשת הצעת מחיר ← שליחת מייל ללקוח
- אישור הצעה ← **"Handshake"** - שליחת מיילים לשני הצדדים עם פרטי קשר

---

## 📋 שלבים לבדיקה

### שלב 1: יצירת פרויקט חדש

**פעולה:**
1. גלוש ל-`https://ai-experts.co.il/he/tasks/new`
2. מלא את פרטי הפרויקט:
   - כותרת: "בדיקת QA ידנית - Handshake"
   - תיאור: "פרויקט לבדיקת זרימת ה-E2E"
   - תקציב: "1000-2000 ₪"
   - בחר התמחות (למשל: ChatGPT)
   - מלא פרטי לקוח (שם, מייל, חברה)
3. סמן את תיבת תנאי השימוש
4. לחץ **"פרסום פרויקט"**

**מה לבדוק:**
- [ ] הודעת הצלחה מופיעה באתר: "הפרויקט נשלח בהצלחה!"
- [ ] **מייל 1 (לקוח)**: קיבלת מייל באימייל של הלקוח עם הכותרת: `"המשימה שלך התקבלה וממתינה לאישור"`
  - וודא שהכותרת והתיאור של הפרויקט מופיעים במייל
  - וודא שהמייל בעברית (אם בחרת `lang=he`)
- [ ] **מייל 2 (Admin)**: הכתובת `ilsimox@gmail.com` קיבלה מייל עם הכותרת: `"[Admin] משימה חדשה ממתינה לאישור"`
  - וודא שיש קישור לממשק הניהול (`/he/admin/tasks`)

**Success Criteria:**  
✅ שני מיילים נשלחו בהצלחה תוך **60 שניות** מיצירת הפרויקט.

---

### שלב 2: אישור הפרויקט (Admin)

**פעולה:**
1. התחבר לאתר עם חשבון Admin (Google Auth)
2. גלוש ל-`https://ai-experts.co.il/he/admin/tasks`
3. מצא את הפרויקט שנוצר בשלב 1
4. לחץ על **"אשר"** (Approve)

**מה לבדוק:**
- [ ] הפרויקט מופיע כעת ב-`/he/tasks` (ציבורי)
- [ ] **מייל למומחים**: כל המומחים עם התמחות תואמת קיבלו מייל
  - נושא: `"משימת AI חדשה עבורך: [כותרת]"`
  - יש קישור לדף הפרויקט

**Success Criteria:**  
✅ המשימה מוצגת בלוח הציבורי והמומחים קיבלו התראות.

---

### שלב 3: הגשת הצעת מחיר (Bid)

**פעולה:**
1. התחבר עם משתמש **אחר** (חשבון מומחה - Google Auth)
2. גלוש לדף הפרויקט: `/he/tasks/[slug]`
3. לחץ על **"הגש הצעה"**
4. מלא:
   - סכום: `1500`
   - הודעה: "שלום, אשמח לסייע עם הפרויקט הזה..."
5. שלח את ההצעה

**מה לבדוק:**
- [ ] ההצעה נוספה למסד הנתונים (רענן את הדף - תראה את ההצעה)
- [ ] **מייל (ללקוח)**: הכתובת של הלקוח קיבלה מייל:
  - נושא: `"הצעה חדשה למשימה שלך: [כותרת]"`
  - פרטי ההצעה (סכום + הודעה) מופיעים במייל
  - יש קישור ל-Dashboard (`/he/dashboard`)

**Success Criteria:**  
✅ הלקוח מקבל התראה בזמן אמת על ההצעה החדשה.

---

### שלב 4: אישור הצעה - **HANDSHAKE** 🤝

**פעולה:**
1. התחבר כבעל הפרויקט (הלקוח מ-שלב 1)
2. גלוש ל-`/he/dashboard`
3. מצא את הפרויקט ברשימת "הפרויקטים שלי"
4. לחץ על **"אשר הצעה"** ליד ההצעה של המומחה

**מה לבדוק:**
- [ ] **סטטוס ב-DB**:
  - הפרויקט עבר ל-`in_progress`
  - ההצעה שאושרה עברה ל-`accepted`
  - כל שאר ההצעות עברו ל-`rejected` (אם היו כאלה)
  
- [ ] **מייל 1 (למומחה)**: הכתובת של המומחה קיבלה מייל:
  - נושא: `"חדשות מצוינות! הצעתך אושרה ב-AI Experts 🎉"`
  - **פרטי הלקוח מופיעים במייל**:
    - שם הלקוח
    - **כתובת המייל של הלקוח** (clickable `mailto:`)
    - חברה (אם צוין)
  - הודעה: "צור קשר עם הלקוח לתיאום תחילת עבודה"

- [ ] **מייל 2 (ללקוח)**: הכתובת של הלקוח קיבלה מייל:
  - נושא: `"לחיצת יד! המומחה לפרויקט שלך אושר 🤝"`
  - **פרטי המומחה מופיעים במייל**:
    - שם המומחה
    - **כתובת המייל של המומחה** (clickable `mailto:`)
    - מחיר סגירה
  - הודעה: "מעכשיו, תוכלו להמשיך את התקשורת ישירות ביניכם"

**Success Criteria:**  
✅ שני המיילים נשלחו תוך **30 שניות** מאישור ההצעה.  
✅ כל מייל מכיל את פרטי הקשר המדויקים של הצד השני (no leaks, no mistakes).

---

### שלב 5: בדיקת Direct Reply

**פעולה:**
1. המומחה פותח את המייל ש"הצעתך אושרה"
2. לוחץ על כתובת המייל של הלקוח (או לוחץ **Reply**)
3. שולח הודעה קצרה: "שלום, נתחיל?"

**מה לבדוק:**
- [ ] הכתובת ב-"To" היא **המייל האמיתי של הלקוח** (לא `noreply@ai-experts.co.il`)
- [ ] הלקוח מקבל את המייל ישירות (לא דרך המערכת)

**Success Criteria:**  
✅ התקשורת עוברת ישירות בין שני הצדדים ללא מעורבות נוספת של הפלטפורמה.

---

## 🔍 בדיקות נוספות (Optional)

### בדיקת Direct Messaging

**פעולה:**
1. ממסך ה-Dashboard של הלקוח, לחץ על "שלח הודעה למומחה"
2. שלח הודעה עם נושא וגוף

**מה לבדוק:**
- [ ] המומחה קיבל מייל עם הנושא והגוף
- [ ] כשהמומחה לוחץ **Reply**, הכתובת היא המייל של הלקוח (לא של המערכת)

---

## 🚨 Red Flags (דברים שלא צריכים לקרות)

- ❌ מייל לא מגיע תוך 2 דקות
- ❌ פרטי קשר חסרים במייל ה-Handshake
- ❌ כתובת מייל שגויה (לא תואמת ל-DB)
- ❌ הסטטוס של הפרויקט לא מתעדכן ל-`in_progress`
- ❌ שאר ההצעות לא נדחות אוטומטית

---

## ✅ הצהרת Production-Ready

**לאחר ביצוע כל השלבים לעיל בהצלחה:**
- [ ] הזרימה המלאה (End-to-End) עובדת ללא שגיאות
- [ ] המיילים מגיעים בזמן ועם התוכן הנכון
- [ ] ה-Handshake מכיל פרטי קשר מדויקים לשני הצדדים
- [ ] הסטטוסים ב-DB מתעדכנים כראוי

**→ הפלטפורמה מוכנה לשחרור ציבורי! 🚀**

---

## 📝 הערות טכניות

- **Resend API Key**: וודא שהמפתח מוגדר ב-`.env` של Firebase Functions
- **Domain Authentication**: וודא ש-`ai-experts.co.il` אומת ב-Resend Dashboard
- **Rate Limits**: Resend Free Tier מאפשר **100 מיילים ליום** - תכנן בהתאם
- **Logs**: בדוק את ה-Console Logs ב-Firebase Functions אם משהו נכשל

---

**תאריך יצירה:** 2026-02-03  
**גרסה:** 1.0  
**סטטוס:** ✅ Ready for Execution
